<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Info</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
</head>

<body>
    <h3
        style="font-weight: bolder; text-align: center;background-color: rgb(241,241,241);height: 48px;line-height: 48px;">
        Rip协议</h3>
    <br>
    <div style="height: 50px;">
        <button type="button" class="btn btn-primary" id="btnEnable" style="margin-left: 20px;">使能</button>
        <button type="button" class="btn btn-primary" id="btnDisable" style="margin-left: 20px;">不使能</button>
        <button type="button" class="btn btn-primary" id="btnAdd" style="margin-left: 20px;">新建</button>
    </div>
    <div class="container-fluid">
        <div class="row" style="margin-top: 20px;">
            <label class="col-md-offset-4 col-md-1 control-label" style="text-transform: uppercase;">Label1</label>
            <label class="col-md-1 control-label" style="color: red;">111</label>
            <label class="col-md-1 control-label" style="text-transform: uppercase;">label2</label>
            <label class="col-md-1 control-label" style="color: red;">222</label>
        </div>
        <div class="row" style="margin-top: 20px;">
            <label class="col-md-offset-4 col-md-1 control-label" style="text-transform: uppercase;">Label3</label>
            <label class="col-md-1 control-label" style="color: red;">333</label>
            <label class="col-md-1 control-label" style="text-transform: uppercase;">label4</label>
            <label class="col-md-1 control-label" style="color: red;">444</label>
        </div>
    </div>
    <div>
        <table class="table table-striped table-bordered " style="width: 95%;margin-top: 10px;">
            <thead>
                <tr>
                    <td>Network</td>
                    <td>Next Hop</td>
                    <td>Metric From</td>
                    <td>Tag</td>
                    <td>Time</td>
                </tr>
            </thead>
            <tbody id="ripBody">

            </tbody>
        </table>
    </div>
    <div class="modal fade" id="modeModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">新增Rip</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr>
                                <td>Route:</td>
                                <td>
                                    <input id="editRoute" type="text" title="端口输入框" style="width: 100%;">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" id="btnRipSave">提交更改</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        var currentStatus = 1;
        var dataset = [];
        var datainfo = [];
        var html = ('');
        function getData() {
            dataset = [
                ["1.1.1.0/24", "2.1.1.1", "1 self", "0", "01:48"],
                ["2.1.1.0/24", "3.1.1.1", "1 self", "0", "01:05"]
            ]
        }

        function loadPage() {
            if (!currentStatus) {
                $("#btnAdd").attr("disabled", "disabled");
                $("#btnDisable").attr("disabled", "disabled");
            }
            else {
                $("#btnEnable").attr("disabled", "disabled");
                $("#btnAdd").removeAttr("disabled");
                $("#btnDisable").removeAttr("disabled");
            }
            if (currentStatus && dataset.length > 0) {
                let dCount = dataset.length;
                html = ('');
                for (let i = 0; i < dCount; i++) {
                    html += ('<tr>');
                    html += ('<td>' + dataset[i][0] + '</td>');
                    html += ('<td>' + dataset[i][1] + '</td>');
                    html += ('<td>' + dataset[i][2] + '</td>');
                    html += ('<td>' + dataset[i][3] + '</td>');
                    html += ('<td>' + dataset[i][4] + '</td>');
                    html += ('</tr>');
                }
                $("#ripBody").html(html);
            }
        }

        function checkData(route) {
            let regRoute = /^(?:(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([1-9]|[1-2]\d|3[0-2])$/;
            if (!regRoute.test(route)) {
                alert("输入地址不合法");
                return false;
            }
            return true;
        }

        $("#btnEnable").click(function () {
            alert("111");
        });

        $("#btnDisable").click(function () {
            alert("222");
        });

        $("#btnAdd").click(function () {
            $("#editRoute").val("");
            $("#modeModal").modal('show');
        });

        $("#btnRipSave").click(function () {
            let route = $("#editRoute").val();
            if (checkData(route)) {
                alert("输入合法");
            }
        });

        $(document).ready(function () {
            getData();
            loadPage();
        });
    </script>
</body>